<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ’˜ ìœ ë¹ˆâ™¥ë™ê·  ì—°ì•  ì‹œë®¬ë ˆì´ì…˜ ğŸ’˜</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #ffe6e6, #ffd6cc);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        animation: backgroundShift 10s ease-in-out infinite alternate;
      }

      @keyframes backgroundShift {
        0% {
          background: linear-gradient(135deg, #ffe6e6, #ffd6cc);
        }
        100% {
          background: linear-gradient(135deg, #ffd6cc, #ffe6e6);
        }
      }

      .game-container {
        background-color: white;
        padding: 2rem;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(255, 107, 107, 0.3);
        max-width: 800px;
        width: 90%;
        border: 3px solid #ffb3ba;
      }

      h1 {
        text-align: center;
        color: #ff6b6b;
        margin-bottom: 2rem;
        text-shadow: 2px 2px 4px rgba(255, 107, 107, 0.3);
        animation: pulse 2s ease-in-out infinite alternate;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.05);
        }
      }

      .game-info {
        background: linear-gradient(135deg, #fff5f5, #ffe6e6);
        padding: 1.5rem;
        border-radius: 15px;
        margin-bottom: 2rem;
        border: 2px solid #ffcccc;
      }

      #day-info {
        font-size: 1.4rem;
        font-weight: bold;
        color: #ff6b6b;
        margin-bottom: 0.8rem;
        text-align: center;
      }

      #stats {
        display: flex;
        justify-content: space-around;
        color: #666;
        font-weight: bold;
      }

      .stat-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .affection-bar,
      .mistakes-bar {
        width: 100px;
        height: 10px;
        background-color: #eee;
        border-radius: 5px;
        overflow: hidden;
      }

      .affection-fill {
        height: 100%;
        background: linear-gradient(90deg, #ff6b6b, #ff8a80);
        transition: width 0.5s ease;
      }

      .mistakes-fill {
        height: 100%;
        background: linear-gradient(90deg, #666, #999);
        transition: width 0.5s ease;
      }

      .event-container {
        background-color: #fff;
        padding: 2rem;
        border-radius: 15px;
        border: 3px solid #ffe6e6;
        box-shadow: inset 0 2px 10px rgba(255, 107, 107, 0.1);
      }

      #event-text {
        font-size: 1.2rem;
        margin-bottom: 2rem;
        line-height: 1.8;
        padding: 1rem;
        background-color: #fafafa;
        border-radius: 10px;
        border-left: 5px solid #ff6b6b;
      }

      #choices {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .choice-btn {
        padding: 1.2rem;
        border: none;
        background: linear-gradient(135deg, #ff6b6b, #ff8a80);
        color: white;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1rem;
        font-weight: bold;
        text-align: left;
        box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
      }

      .choice-btn:hover {
        background: linear-gradient(135deg, #ff5252, #ff6b6b);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
      }

      .choice-btn:active {
        transform: translateY(0);
      }

      .choice-btn:disabled {
        background: linear-gradient(135deg, #ccc, #ddd);
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      .ending-container {
        text-align: center;
        padding: 2rem;
        background: linear-gradient(135deg, #fff5f5, #ffe6e6);
        border-radius: 15px;
        margin-top: 1rem;
      }

      .ending-text {
        font-size: 1.3rem;
        font-weight: bold;
        margin-bottom: 1rem;
        color: #ff6b6b;
      }

      .restart-btn {
        padding: 1rem 2rem;
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.1rem;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
      }

      .restart-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
      }

      @media (max-width: 600px) {
        .game-container {
          padding: 1rem;
          width: 95%;
        }

        h1 {
          font-size: 1.5rem;
        }

        #stats {
          flex-direction: column;
          gap: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <h1>ğŸ’˜ ìœ ë¹ˆâ™¥ë™ê·  ì—°ì•  ì‹œë®¬ë ˆì´ì…˜ ğŸ’˜</h1>
      <div class="game-info">
        <div id="day-info">Day 1</div>
        <div id="stats">
          <div class="stat-item">
            <div>í˜¸ê°ë„: <span id="affection">50</span>/100</div>
            <div class="affection-bar">
              <div
                class="affection-fill"
                id="affection-fill"
                style="width: 50%"
              ></div>
            </div>
          </div>
          <div class="stat-item">
            <div>ì‹¤ìˆ˜ íšŸìˆ˜: <span id="mistakes">0</span>/3</div>
            <div class="mistakes-bar">
              <div
                class="mistakes-fill"
                id="mistakes-fill"
                style="width: 0%"
              ></div>
            </div>
          </div>
        </div>
      </div>
      <div class="event-container">
        <div id="event-text"></div>
        <div id="choices"></div>
      </div>
    </div>

    <script>
      class DatingSimulator {
        constructor() {
          this.day = 1;
          this.affection = 50;
          this.mistakes = 0;
          this.specialFlags = {
            hasGift: false,
            hasDate: false,
            hasMovie: false,
            hasTravel: false,
            hasConfession: false,
          };
          this.events = [
            {
              day: 1,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ ìƒì¼ì´ì—ìš”! ë™ê· ì´ëŠ” ì–´ë–»ê²Œ í• ê¹Œìš”?",
              choices: [
                {
                  text: "ğŸ’ ì •ì„± ê°€ë“í•œ í¸ì§€ì™€ ì„ ë¬¼ì„ ì¤€ë¹„í•œë‹¤",
                  affection: 12,
                  flag: "hasGift",
                },
                { text: "ğŸ“± ì¹´í†¡ ì´ëª¨í‹°ì½˜ë§Œ ë³´ë‚¸ë‹¤", affection: -5 },
                { text: "ğŸ¤·â€â™‚ï¸ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠëŠ”ë‹¤", affection: -10 },
              ],
            },
            {
              day: 2,
              text: "ğŸ’¬ [Event] ë™ê· ì´ê°€ ìœ ë¹ˆì´ì—ê²Œ ë°¥ ì•½ì†ì„ ì¡ìœ¼ë ¤ í•´ìš”.",
              choices: [
                {
                  text: "ğŸ½ï¸ 'ì´ë²ˆ ì£¼ë§ ì–´ë•Œ? ë‚´ê°€ ë§›ì§‘ ì°¾ì•„ë³¼ê²Œ!'",
                  affection: 10,
                  flag: "hasDate",
                },
                { text: "ğŸ˜ 'ê·¸ëƒ¥ ëŒ€ì¶© ê·¼ì²˜ì—ì„œ ë¨¹ì'", affection: -3 },
                { text: "ğŸ“ 'ì–¸ì œë“  ì‹œê°„ ë˜ë©´ ì—°ë½í•´'", affection: 5 },
              ],
            },
            {
              day: 3,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì—ê²Œ ì˜í™”ë¥¼ ë³´ìê³  í•´ìš”.",
              choices: [
                {
                  text: "ğŸ’• 'ì¢‹ì•„! ë¡œë§¨ìŠ¤ ì˜í™”ëŠ” ì–´ë•Œ?'",
                  affection: 8,
                  flag: "hasMovie",
                },
                { text: "ğŸ’¥ 'ë‚œ ì•¡ì…˜ ì˜í™”ê°€ ì¢‹ì€ë°...'", affection: -3 },
                { text: "ğŸ¤” 'ë„¤ê°€ ê³ ë¥´ëŠ” ê±¸ë¡œ í•˜ì'", affection: 6 },
              ],
            },
            {
              day: 4,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ê°‘ìê¸° ê¸°ë¶„ì´ ì¢‹ì§€ ì•Šì•„ ë³´ì—¬ìš”.",
              choices: [
                { text: "ğŸ¤— 'ë¬´ìŠ¨ ì¼ ìˆì–´? ë‚´ê°€ ë“¤ì–´ì¤„ê²Œ'", affection: 10 },
                { text: "ğŸ˜• 'ë‚˜ë„ ì˜¤ëŠ˜ ì»¨ë””ì…˜ì´ ì•ˆ ì¢‹ì•„'", affection: -7 },
                { text: "â˜• 'ì»¤í”¼ í•œì” í• ê¹Œ? ê¸°ë¶„ ì „í™˜í•˜ì'", affection: 7 },
              ],
            },
            {
              day: 5,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ì—¬í–‰ì„ ê°€ìê³  ì œì•ˆí•´ìš”.",
              choices: [
                {
                  text: "âœˆï¸ 'ì¢‹ì•„! ì œì£¼ë„ëŠ” ì–´ë•Œ?'",
                  affection: 15,
                  flag: "hasTravel",
                },
                { text: "ğŸ˜° 'ì—¬í–‰ì€ ì¢€ ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ê²ƒ ê°™ì•„'", affection: -8 },
                { text: "ğŸ—“ï¸ 'ê³„íšì„ ì„¸ì›Œë³´ì'", affection: 8 },
              ],
            },
            {
              day: 6,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ì˜ ì¹œêµ¬ë“¤ì´ ë™ê· ì´ë¥¼ ë§Œë‚˜ê³  ì‹¶ì–´í•´ìš”.",
              choices: [
                { text: "ğŸ˜Š 'ì¢‹ì•„! ê°™ì´ ë°¥ ë¨¹ì'", affection: 9 },
                { text: "ğŸ˜¬ 'ì•„ì§ì€ ì¢€ ê·¸ë ‡ì§€ ì•Šì„ê¹Œ?'", affection: -5 },
                { text: "ğŸ‰ 'ì–¸ì œë“  í™˜ì˜ì´ì•¼!'", affection: 12 },
              ],
            },
            {
              day: 7,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì˜ ì·¨ë¯¸ì— ëŒ€í•´ ê¶ê¸ˆí•´í•´ìš”.",
              choices: [
                { text: "ğŸ“š 'ì±… ì½ëŠ” ê±¸ ì¢‹ì•„í•´. ë„ˆëŠ” ì–´ë•Œ?'", affection: 8 },
                { text: "ğŸ¤·â€â™‚ï¸ 'ë³„ë¡œ ì·¨ë¯¸ ì—†ì–´'", affection: -4 },
                { text: "ğŸ® 'ê²Œì„ì´ë‘ ì˜í™” ë³´ëŠ” ê±° ì¢‹ì•„í•´'", affection: 6 },
              ],
            },
            {
              day: 8,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì˜ ê³¼ê±° ì—°ì•  ê²½í—˜ì„ ë¬¼ì–´ë´ìš”.",
              choices: [
                { text: "ğŸ˜Œ ì†”ì§í•˜ê²Œ ì´ì•¼ê¸°í•œë‹¤", affection: 7 },
                { text: "ğŸ˜… 'ê·¸ëŸ° ì–˜ê¸°ëŠ” ì¢€ ê·¸ë ‡ì§€ ì•Šì„ê¹Œ?'", affection: -6 },
                { text: "ğŸ¤— 'ë„ˆë§Œ ìˆìœ¼ë©´ ë¼'", affection: 10 },
              ],
            },
            {
              day: 9,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì—ê²Œ ì§„ì§€í•œ ê³ ë¯¼ì„ í„¸ì–´ë†“ì•„ìš”.",
              choices: [
                { text: "ğŸ«‚ ì§„ì‹¬ìœ¼ë¡œ ê³µê°í•˜ê³  ì¡°ì–¸í•œë‹¤", affection: 12 },
                { text: "ğŸ˜ ê·¸ëƒ¥ ëŒ€ì¶© ë„˜ê¸´ë‹¤", affection: -10 },
                { text: "ğŸ’ª 'í•¨ê»˜ í•´ê²°í•´ë³´ì'", affection: 15 },
              ],
            },
            {
              day: 10,
              text: "ğŸ’¬ [Event] ë¶„ìœ„ê¸°ê°€ ë¬´ë¥´ìµì—ˆì–´ìš”. ìœ ë¹ˆì´ê°€ ê³ ë°±ì„ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ” ê²ƒ ê°™ì•„ìš”.",
              choices: [
                {
                  text: "ğŸ’– 'ë„ˆë¥¼ ì¢‹ì•„í•´. ë‚˜ë‘ ì‚¬ê·€ì'",
                  affection: 20,
                  flag: "hasConfession",
                },
                { text: "ğŸ˜° 'ì•„ì§ì€ ì¢€ ì´ë¥¸ ê²ƒ ê°™ì•„'", affection: -12 },
                { text: "ğŸ¤ 'ì¢‹ì€ ì¹œêµ¬ë¡œ ì§€ë‚´ì'", affection: -5 },
              ],
            },
            {
              day: 11,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ì˜ ë¶€ëª¨ë‹˜ì´ ë™ê· ì´ë¥¼ ë§Œë‚˜ê³  ì‹¶ì–´í•˜ì„¸ìš”.",
              choices: [
                { text: "ğŸ˜Š ê¸°êº¼ì´ ë§Œë‚˜ëŸ¬ ê°„ë‹¤", affection: 12 },
                { text: "ğŸ˜¬ 'ì•„ì§ì€ ì¢€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ'", affection: -8 },
                { text: "ğŸ 'ì„ ë¬¼ì„ ì¤€ë¹„í•´ì„œ ê°€ì•¼ê² ì–´'", affection: 15 },
              ],
            },
            {
              day: 12,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì˜ ë¯¸ë˜ ê³„íšì„ ë¬¼ì–´ë´ìš”.",
              choices: [
                { text: "ğŸ’¼ ì§„ì§€í•˜ê²Œ ë¯¸ë˜ ê³„íšì„ ì´ì•¼ê¸°í•œë‹¤", affection: 10 },
                { text: "ğŸ¤·â€â™‚ï¸ 'ì•„ì§ì€ ì˜ ëª¨ë¥´ê² ì–´'", affection: -5 },
                { text: "ğŸ’• 'ë„ˆì™€ í•¨ê»˜í•˜ëŠ” ë¯¸ë˜ë¥¼ ê¿ˆê¿”'", affection: 15 },
              ],
            },
            {
              day: 13,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì—ê²Œ íŠ¹ë³„í•œ ì„ ë¬¼ì„ ì£¼ë ¤ê³  í•´ìš”.",
              choices: [
                {
                  text: "ğŸ 'ê³ ë§ˆì›Œ, ë‚˜ë„ ë„ˆë¥¼ ìœ„í•œ ì„ ë¬¼ì´ ìˆì–´'",
                  affection: 12,
                },
                { text: "ğŸ˜… 'ì„ ë¬¼ì€ ì¢€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ'", affection: -7 },
                { text: "ğŸ¤— 'ë„¤ ë§ˆìŒì´ ê°€ì¥ ì†Œì¤‘í•´'", affection: 10 },
              ],
            },
            {
              day: 14,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì˜ ì·¨í–¥ì— ëŒ€í•´ ë” ìì„¸íˆ ì•Œê³  ì‹¶ì–´í•´ìš”.",
              choices: [
                { text: "ğŸ“ ìì„¸íˆ ì„¤ëª…í•´ì¤€ë‹¤", affection: 8 },
                { text: "ğŸ˜ 'ë³„ë¡œ íŠ¹ë³„í•œ ì·¨í–¥ì€ ì—†ì–´'", affection: -5 },
                { text: "ğŸ’• 'ë„ˆì˜ ì·¨í–¥ë„ ê¶ê¸ˆí•´'", affection: 10 },
              ],
            },
            {
              day: 15,
              text: "ğŸ’¬ [Event] ìœ ë¹ˆì´ê°€ ë™ê· ì´ì™€ í•¨ê»˜ íŠ¹ë³„í•œ í•˜ë£¨ë¥¼ ë§Œë“¤ê³  ì‹¶ì–´í•´ìš”.",
              choices: [
                { text: "ğŸŒŸ í•¨ê»˜ íŠ¹ë³„í•œ ì¶”ì–µì„ ë§Œë“ ë‹¤", affection: 18 },
                { text: "ğŸ˜Š í‰ë²”í•œ ë°ì´íŠ¸ë¡œ ë§Œì¡±í•œë‹¤", affection: 8 },
                { text: "ğŸ’– 'ë§¤ì¼ì´ ë„ˆì™€ í•¨ê»˜ë¼ë©´ íŠ¹ë³„í•´'", affection: 20 },
              ],
            },
          ];
          this.init();
        }

        init() {
          this.updateUI();
          this.showCurrentEvent();
        }

        updateUI() {
          document.getElementById("day-info").textContent = `Day ${this.day}`;
          document.getElementById("affection").textContent = this.affection;
          document.getElementById("mistakes").textContent = this.mistakes;

          // Update progress bars
          const affectionPercent = (this.affection / 100) * 100;
          const mistakesPercent = (this.mistakes / 3) * 100;

          document.getElementById(
            "affection-fill"
          ).style.width = `${affectionPercent}%`;
          document.getElementById(
            "mistakes-fill"
          ).style.width = `${mistakesPercent}%`;
        }

        showCurrentEvent() {
          const currentEvent = this.events.find(
            (event) => event.day === this.day
          );
          if (!currentEvent) {
            this.endGame();
            return;
          }

          const eventText = document.getElementById("event-text");
          const choices = document.getElementById("choices");

          eventText.textContent = currentEvent.text;
          choices.innerHTML = "";

          currentEvent.choices.forEach((choice, index) => {
            const button = document.createElement("button");
            button.className = "choice-btn";
            button.textContent = `${index + 1}. ${choice.text}`;
            button.onclick = () => this.makeChoice(choice);
            choices.appendChild(button);
          });
        }

        makeChoice(choice) {
          // Disable all buttons to prevent double clicks
          const buttons = document.querySelectorAll(".choice-btn");
          buttons.forEach((btn) => (btn.disabled = true));

          // Show choice feedback
          this.showChoiceFeedback(choice);

          setTimeout(() => {
            this.affection += choice.affection;
            this.affection = Math.max(0, Math.min(100, this.affection));

            if (choice.affection < 0) {
              this.mistakes++;
            }

            if (choice.flag) {
              this.specialFlags[choice.flag] = true;
            }

            this.day++;
            this.updateUI();

            // Check for max affection confession
            if (this.affection >= 100 && !this.specialFlags.hasConfession) {
              this.showMaxAffectionConfession();
              return;
            }

            if (this.mistakes >= 3 || this.affection <= 0) {
              this.endGame();
            } else {
              this.showCurrentEvent();
            }
          }, 1500);
        }

        showChoiceFeedback(choice) {
          const eventText = document.getElementById("event-text");
          const originalText = eventText.textContent;

          let feedbackText = "";
          let feedbackColor = "";

          if (choice.affection > 10) {
            feedbackText = "ğŸ’– ìœ ë¹ˆì´ê°€ ì •ë§ ì¢‹ì•„í•´ìš”! +" + choice.affection;
            feedbackColor = "#ff1744";
          } else if (choice.affection > 5) {
            feedbackText =
              "ğŸ˜Š ìœ ë¹ˆì´ì˜ ê¸°ë¶„ì´ ì¢‹ì•„ì¡Œì–´ìš”! +" + choice.affection;
            feedbackColor = "#ff6b6b";
          } else if (choice.affection > 0) {
            feedbackText = "ğŸ™‚ ê´œì°®ì€ ì„ íƒì´ì—ìš”. +" + choice.affection;
            feedbackColor = "#4CAF50";
          } else if (choice.affection < -5) {
            feedbackText = "ğŸ˜ ìœ ë¹ˆì´ê°€ ë§ì´ ì‹¤ë§í–ˆì–´ìš”... " + choice.affection;
            feedbackColor = "#f44336";
          } else {
            feedbackText = "ğŸ˜ ìœ ë¹ˆì´ê°€ ì¡°ê¸ˆ ì•„ì‰¬ì›Œí•´ìš”. " + choice.affection;
            feedbackColor = "#ff9800";
          }

          eventText.innerHTML = `
                    <div style="color: ${feedbackColor}; font-weight: bold; text-align: center; font-size: 1.3rem; padding: 1rem;">
                        ${feedbackText}
                    </div>
                `;

          setTimeout(() => {
            eventText.textContent = originalText;
          }, 1200);
        }

        showMaxAffectionConfession() {
          const eventText = document.getElementById("event-text");
          const choices = document.getElementById("choices");

          eventText.innerHTML = `
                    <div style="background: linear-gradient(135deg, #ffe6e6, #ffd6cc); padding: 2rem; border-radius: 15px; text-align: center;">
                        <div style="font-size: 1.5rem; margin-bottom: 1rem;">ğŸ’•âœ¨ íŠ¹ë³„í•œ ìˆœê°„ âœ¨ğŸ’•</div>
                        <div style="font-size: 1.2rem; line-height: 1.8; color: #333;">
                            "ë™ê· ì•„... ë„ˆë‘ í•¨ê»˜ ìˆìœ¼ë©´ ë„ˆë¬´ í–‰ë³µí•´. 
                            ë‚˜... ë„ˆë¥¼ ì •ë§ ì¢‹ì•„í•´. ë‚˜ë‘ ì‚¬ê·ˆë˜?"<br><br>
                            <em style="color: #ff6b6b;">ìœ ë¹ˆì´ê°€ ìš©ê¸°ë¥¼ ë‚´ì–´ ë¨¼ì € ê³ ë°±í–ˆì–´ìš”!</em>
                        </div>
                    </div>
                `;

          choices.innerHTML = "";

          const confessionChoices = [
            {
              text: "ğŸ’– 'ë‚˜ë„ ë„ˆë¥¼ ì¢‹ì•„í•´! ë¬¼ë¡ ì´ì•¼!'",
              affection: 25,
              flag: "hasConfession",
              ending: "perfect",
            },
            {
              text: "ğŸ¤— 'ê³ ë§ˆì›Œ... ë‚˜ë„ ê°™ì€ ë§ˆìŒì´ì—ˆì–´'",
              affection: 20,
              flag: "hasConfession",
              ending: "sweet",
            },
            {
              text: "ğŸ˜… 'ì¢€ ë” ì²œì²œíˆ ìƒê°í•´ë³¼ê¹Œ?'",
              affection: -15,
              ending: "friend_zone",
            },
            {
              text: "ğŸ˜° 'ë¯¸ì•ˆ... ë‚˜ëŠ” ì•„ì§...'",
              affection: -25,
              ending: "rejection",
            },
          ];

          confessionChoices.forEach((choice, index) => {
            const button = document.createElement("button");
            button.className = "choice-btn";
            button.style.fontSize = "1.1rem";
            button.style.padding = "1.5rem";
            button.textContent = `${index + 1}. ${choice.text}`;
            button.onclick = () => this.handleConfessionChoice(choice);
            choices.appendChild(button);
          });
        }

        handleConfessionChoice(choice) {
          const buttons = document.querySelectorAll(".choice-btn");
          buttons.forEach((btn) => (btn.disabled = true));

          this.affection += choice.affection;
          this.affection = Math.max(0, Math.min(100, this.affection));

          if (choice.flag) {
            this.specialFlags[choice.flag] = true;
          }

          this.specialFlags.confessionEnding = choice.ending;

          setTimeout(() => {
            this.endGame();
          }, 1000);
        }

        endGame() {
          const eventText = document.getElementById("event-text");
          const choices = document.getElementById("choices");

          let endingMessage = "";
          let endingEmoji = "";
          let endingTitle = "";

          // Special confession endings
          if (this.specialFlags.confessionEnding) {
            switch (this.specialFlags.confessionEnding) {
              case "perfect":
                endingTitle = "ğŸ’• ì™„ë²½í•œ ì‚¬ë‘ ì—”ë”© ğŸ’•";
                endingMessage =
                  "ë‘ ì‚¬ëŒì´ ì„œë¡œì˜ ë§ˆìŒì„ í™•ì¸í•˜ê³  ì™„ë²½í•œ ì»¤í”Œì´ ë˜ì—ˆì–´ìš”! ì•ìœ¼ë¡œë„ í–‰ë³µí•˜ê²Œ ì§€ë‚´ì„¸ìš”! ğŸ’–";
                endingEmoji = "ğŸŒŸ";
                break;
              case "sweet":
                endingTitle = "ğŸ’ ë‹¬ì½¤í•œ ì—°ì¸ ì—”ë”© ğŸ’";
                endingMessage =
                  "ì¡°ê¸ˆ ìˆ˜ì¤ì§€ë§Œ ì§„ì‹¤í•œ ë§ˆìŒì´ í†µí–ˆì–´ìš”. ë‘ ì‚¬ëŒì˜ ì‚¬ë‘ì´ ì‹œì‘ë˜ì—ˆë„¤ìš”!";
                endingEmoji = "ğŸ’•";
                break;
              case "friend_zone":
                endingTitle = "ğŸ˜… ì¹œêµ¬ì¡´ ì—”ë”© ğŸ˜…";
                endingMessage =
                  "ì•„ì§ì€ ì¹œêµ¬ë¡œ ë‚¨ê¸°ë¡œ í–ˆì§€ë§Œ, ì–¸ì  ê°€ ë‹¤ì‹œ ê¸°íšŒê°€ ì˜¬ì§€ë„ ëª¨ë¥´ë„¤ìš”...";
                endingEmoji = "ğŸ¤";
                break;
              case "rejection":
                endingTitle = "ğŸ’” ê±°ì ˆ ì—”ë”© ğŸ’”";
                endingMessage =
                  "ìœ ë¹ˆì´ì˜ ìš©ê¸°ìˆëŠ” ê³ ë°±ì„ ê±°ì ˆí–ˆì–´ìš”. í•˜ì§€ë§Œ ì¢‹ì€ ì¶”ì–µìœ¼ë¡œ ë‚¨ì„ ê±°ì˜ˆìš”.";
                endingEmoji = "ğŸ˜¢";
                break;
            }
          }
          // Regular endings
          else if (this.mistakes >= 3) {
            endingTitle = "âŒ ì‹¤íŒ¨ ì—”ë”© âŒ";
            endingMessage =
              "ì‹¤ìˆ˜ë¥¼ ë„ˆë¬´ ë§ì´ í•´ì„œ ìœ ë¹ˆì´ê°€ ì‹¤ë§í–ˆì–´ìš”... ë‹¤ìŒì—” ë” ì‹ ì¤‘í•˜ê²Œ í–‰ë™í•´ë³´ì„¸ìš”!";
            endingEmoji = "ğŸ˜”";
          } else if (this.affection <= 0) {
            endingTitle = "ğŸ’” ì´ë³„ ì—”ë”© ğŸ’”";
            endingMessage =
              "í˜¸ê°ë„ê°€ 0ì´ ë˜ì–´ ìœ ë¹ˆì´ê°€ ë– ë‚¬ì–´ìš”... ìƒëŒ€ë°©ì˜ ë§ˆìŒë„ ìƒê°í•´ë³´ì„¸ìš”.";
            endingEmoji = "ğŸ˜­";
          } else if (this.affection >= 90 && this.specialFlags.hasConfession) {
            endingTitle = "ğŸ‘‘ ì™„ë²½í•œ ì—”ë”© ğŸ‘‘";
            endingMessage =
              "ëª¨ë“  ì„ íƒì„ ì™„ë²½í•˜ê²Œ í•˜ì—¬ ìµœê³ ì˜ ê²°ê³¼ë¥¼ ì–»ì—ˆì–´ìš”! ë‘ ì‚¬ëŒì˜ ë¯¸ë˜ê°€ ê¸°ëŒ€ë˜ë„¤ìš”!";
            endingEmoji = "ğŸ†";
          } else if (this.affection >= 80) {
            endingTitle = "ğŸ’• ì¢‹ì€ ì—”ë”© ğŸ’•";
            endingMessage =
              "ìœ ë¹ˆì´ì™€ì˜ ê´€ê³„ê°€ ë”ìš± ê¹Šì–´ì¡Œì–´ìš”! ì•ìœ¼ë¡œë„ ì„œë¡œë¥¼ ì•„ë¼ë©° ì§€ë‚´ì„¸ìš”.";
            endingEmoji = "ğŸ˜Š";
          } else if (this.affection >= 60) {
            endingTitle = "ğŸ’ í‰ë²”í•œ ì—”ë”© ğŸ’";
            endingMessage =
              "ìœ ë¹ˆì´ì™€ ì¢‹ì€ ì¹œêµ¬ë¡œ ë‚¨ì•˜ì–´ìš”. ìš°ì •ë„ ì†Œì¤‘í•œ ê´€ê³„ëë‹ˆë‹¤.";
            endingEmoji = "ğŸ™‚";
          } else {
            endingTitle = "ğŸ˜¢ ì•„ì‰¬ìš´ ì—”ë”© ğŸ˜¢";
            endingMessage =
              "ìœ ë¹ˆì´ì™€ì˜ ê´€ê³„ê°€ ì†Œì›í•´ì¡Œì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”!";
            endingEmoji = "ğŸ˜";
          }

          // Calculate special achievements
          let achievements = [];
          if (this.specialFlags.hasGift) achievements.push("ğŸ ì„ ë¬¼ ë§ˆìŠ¤í„°");
          if (this.specialFlags.hasDate) achievements.push("ğŸ½ï¸ ë°ì´íŠ¸ í”Œë˜ë„ˆ");
          if (this.specialFlags.hasMovie) achievements.push("ğŸ¬ ì˜í™” ëŸ¬ë²„");
          if (this.specialFlags.hasTravel) achievements.push("âœˆï¸ ì—¬í–‰ ë©”ì´íŠ¸");
          if (this.specialFlags.hasConfession)
            achievements.push("ğŸ’– ê³ ë°± ì„±ê³µ");
          if (this.mistakes === 0) achievements.push("â­ ì™„ë²½ì£¼ì˜ì");
          if (this.affection === 100) achievements.push("ğŸ’¯ í˜¸ê°ë„ ë§Œì ");

          eventText.innerHTML = `
                    <div class="ending-container">
                        <div class="ending-text">${endingEmoji} ${endingTitle}</div>
                        <div style="margin: 1.5rem 0; font-size: 1.1rem; line-height: 1.6;">
                            ${endingMessage}
                        </div>
                        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 10px; margin: 1rem 0; border-left: 4px solid #ff6b6b;">
                            <strong>ğŸ“Š ìµœì¢… ê²°ê³¼</strong><br>
                            ìµœì¢… í˜¸ê°ë„: <span style="color: #ff6b6b; font-weight: bold;">${
                              this.affection
                            }/100</span><br>
                            ì‹¤ìˆ˜ íšŸìˆ˜: <span style="color: #666; font-weight: bold;">${
                              this.mistakes
                            }/3</span><br>
                            ì§„í–‰í•œ ë‚ : <span style="color: #4CAF50; font-weight: bold;">${
                              this.day - 1
                            }ì¼</span>
                        </div>
                        ${
                          achievements.length > 0
                            ? `
                        <div style="background: linear-gradient(135deg, #fff3e0, #ffe0b2); padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                            <strong style="color: #ff8f00;">ğŸ… íšë“í•œ ì—…ì </strong><br>
                            <div style="margin-top: 0.5rem;">
                                ${achievements.join(" â€¢ ")}
                            </div>
                        </div>
                        `
                            : ""
                        }
                    </div>
                `;

          choices.innerHTML = `
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center;">
                        <button class="restart-btn" onclick="location.reload()">ğŸ”„ ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
                        <button class="restart-btn" onclick="window.gameInstance.showStats()" style="background: linear-gradient(135deg, #2196F3, #1976D2);">ğŸ“ˆ í†µê³„ ë³´ê¸°</button>
                    </div>
                `;
        }

        showStats() {
          alert(
            `ğŸ® ê²Œì„ í†µê³„\n\nì´ ${this.day - 1}ì¼ ì§„í–‰\nìµœê³  í˜¸ê°ë„: ${
              this.affection
            }\nì‹¤ìˆ˜ íšŸìˆ˜: ${this.mistakes}\níŠ¹ë³„ ì´ë²¤íŠ¸: ${
              Object.values(this.specialFlags).filter((v) => v === true).length
            }ê°œ ë‹¬ì„±`
          );
        }
      }

      // ê²Œì„ ì‹œì‘
      window.onload = () => {
        window.gameInstance = new DatingSimulator();
      };
    </script>
  </body>
</html>
